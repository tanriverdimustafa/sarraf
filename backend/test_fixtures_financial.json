{
  "transaction_types": [
    {
      "code": "PURCHASE",
      "name": "Alış (Tedarikçiden)",
      "direction": "IN",
      "affects_inventory": true,
      "affects_balance": true,
      "requires_party": true,
      "sort_order": 1
    },
    {
      "code": "SALE",
      "name": "Satış (Müşteriye)",
      "direction": "OUT",
      "affects_inventory": true,
      "affects_balance": true,
      "requires_party": true,
      "sort_order": 2
    },
    {
      "code": "PAYMENT",
      "name": "Ödeme",
      "direction": "OUT",
      "affects_inventory": false,
      "affects_balance": true,
      "requires_party": true,
      "sort_order": 3
    },
    {
      "code": "RECEIPT",
      "name": "Tahsilat",
      "direction": "IN",
      "affects_inventory": false,
      "affects_balance": true,
      "requires_party": true,
      "sort_order": 4
    },
    {
      "code": "EXCHANGE",
      "name": "Döviz Alım-Satım",
      "direction": "NEUTRAL",
      "affects_inventory": false,
      "affects_balance": true,
      "requires_party": false,
      "sort_order": 5
    },
    {
      "code": "ADJUSTMENT",
      "name": "Düzeltme / Mahsup",
      "direction": "NEUTRAL",
      "affects_inventory": false,
      "affects_balance": true,
      "requires_party": false,
      "sort_order": 6
    },
    {
      "code": "HURDA",
      "name": "Hurda İşlemi",
      "direction": "OUT",
      "affects_inventory": true,
      "affects_balance": true,
      "requires_party": true,
      "sort_order": 7
    }
  ],
  "payment_methods": [
    {
      "code": "CASH_TRY",
      "name": "Nakit TL",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "TRY",
      "type": "CASH"
    },
    {
      "code": "BANK_TRY",
      "name": "Havale TL",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "TRY",
      "type": "BANK"
    },
    {
      "code": "CASH_USD",
      "name": "Nakit USD",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "USD",
      "type": "CASH"
    },
    {
      "code": "BANK_USD",
      "name": "Havale USD",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "USD",
      "type": "BANK"
    },
    {
      "code": "CASH_EUR",
      "name": "Nakit EUR",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "EUR",
      "type": "CASH"
    },
    {
      "code": "BANK_EUR",
      "name": "Havale EUR",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "EUR",
      "type": "BANK"
    },
    {
      "code": "CREDIT_CARD",
      "name": "Kredi Kartı",
      "commission_rate": 0.025,
      "is_active": true,
      "currency": "TRY",
      "type": "BANK"
    },
    {
      "code": "CHECK",
      "name": "Çek",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "TRY",
      "type": "BANK"
    },
    {
      "code": "GOLD_SCRAP",
      "name": "Hurda Altın",
      "commission_rate": 0.0,
      "is_active": true,
      "currency": "HAS",
      "type": "OTHER"
    }
  ],
  "currencies": [
    {
      "code": "TRY",
      "name": "Türk Lirası",
      "symbol": "₺",
      "is_active": true
    },
    {
      "code": "USD",
      "name": "Amerikan Doları",
      "symbol": "$",
      "is_active": true
    },
    {
      "code": "EUR",
      "name": "Euro",
      "symbol": "€",
      "is_active": true
    }
  ],
  "price_snapshots": [
    {
      "as_of": "2025-12-10T09:00:00.000Z",
      "source": "MANUAL",
      "has_buy_tl": 2000.5,
      "has_sell_tl": 2050.75,
      "usd_buy_tl": 34.125,
      "usd_sell_tl": 34.35,
      "eur_buy_tl": 36.875,
      "eur_sell_tl": 37.125,
      "raw_payload": null,
      "created_by": "system"
    }
  ],
  "test_scenarios": {
    "scenario_1_purchase": {
      "description": "22 ayar 15.5g bilezik alışı - Tedarikçiden",
      "input": {
        "type_code": "PURCHASE",
        "party_id": "party_001",
        "transaction_date": "2025-12-10T10:00:00Z",
        "currency": "TRY",
        "total_amount_currency": 45000.0,
        "payment_method_code": "BANK_TRANSFER",
        "lines": [
          {
            "product_type_code": "GOLD_BRACELET",
            "karat_id": "karat_22",
            "weight_gram": 15.5,
            "labor_type_code": "PER_GRAM",
            "labor_has_value": 0.5,
            "quantity": 1
          }
        ],
        "notes": "Kapalıçarşı alışı - Test"
      },
      "expected": {
        "material_has": 14.198,
        "labor_has": 7.75,
        "line_total_has": 21.948,
        "total_has_amount": 21.948,
        "comment": "15.5 * 0.916 = 14.198 (material), 15.5 * 0.5 = 7.75 (labor)"
      }
    },
    "scenario_2_payment": {
      "description": "Tedarikçiye 10,000 TL nakit ödeme",
      "input": {
        "type_code": "PAYMENT",
        "party_id": "party_001",
        "transaction_date": "2025-12-10T15:00:00Z",
        "currency": "TRY",
        "total_amount_currency": 10000.0,
        "payment_method_code": "CASH",
        "notes": "Alış ödemesi"
      },
      "expected": {
        "has_amount": 5.0,
        "total_has_amount": -5.0,
        "comment": "10000 / 2000.50 = 4.999 ≈ 5.0 HAS (negatif = ödeme)"
      }
    },
    "scenario_3_sale": {
      "description": "18 ayar yüzük satışı - Müşteriye",
      "input": {
        "type_code": "SALE",
        "party_id": "party_002",
        "transaction_date": "2025-12-10T14:30:00Z",
        "currency": "TRY",
        "total_amount_currency": 18500.0,
        "payment_method_code": "CREDIT_CARD",
        "lines": [
          {
            "product_id": "product_abc456",
            "unit_price_currency": 18500.0
          }
        ],
        "notes": "Müşteri satışı"
      },
      "expected": {
        "product_cost_has": 7.625,
        "product_sale_has": 9.15,
        "gross_profit_has": 1.525,
        "commission_has": 0.225,
        "net_profit_has": 1.3,
        "comment": "Product cost: 7.625 HAS, Sale: 9.150 HAS, Profit: 1.525 HAS, Komisyon (%2.5): 462.5 TL = 0.225 HAS, Net: 1.300 HAS"
      }
    },
    "scenario_4_hurda_payment": {
      "description": "Tedarikçiye 22 ayar 5g hurda ile ödeme",
      "input": {
        "type_code": "HURDA",
        "party_id": "party_001",
        "transaction_date": "2025-12-10T16:00:00Z",
        "lines": [
          {
            "karat_id": "karat_22",
            "weight_gram": 5.0,
            "note": "Hurda bilezik parçası"
          }
        ],
        "notes": "Hurda ile ödeme"
      },
      "expected": {
        "scrap_has": 4.58,
        "total_has_amount": -4.58,
        "equivalent_tl": 9397.44,
        "comment": "5.0 * 0.916 = 4.580 HAS, TL karşılığı: 4.580 * 2050.75 = 9397.44 TL"
      }
    },
    "scenario_5_exchange": {
      "description": "100,000 TL ile USD alışı",
      "input": {
        "type_code": "EXCHANGE",
        "transaction_date": "2025-12-10T16:30:00Z",
        "from_currency": "TRY",
        "to_currency": "USD",
        "from_amount": 100000.0,
        "to_amount": 2915.0,
        "fx_rate": 34.32,
        "notes": "USD alışı"
      },
      "expected": {
        "from_has": 49.988,
        "to_has": 49.988,
        "net_has": 0.0,
        "comment": "100000 / 2000.50 = 49.988 HAS (OUT), 2915 * 34.35 = 100139.25 / 2000.50 = 50.0 HAS (IN), Net ≈ 0"
      }
    }
  }
}